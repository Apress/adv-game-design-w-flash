package com.friendsofed.gameElements.turret{	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;	import flash.events.Event;	import flash.events.TimerEvent;	import flash.utils.Timer;	import com.friendsofed.gameElements.primitives.*;	import com.friendsofed.vector.*;	public class TurretAIController 	{	  private var _turretModel:TurretAIModel;	  private var _gameModel:Object;	  private var _stage:Object;	  private var _timer:Timer;	  private var _turretArmed:Boolean = false;		public function TurretAIController		  (		    turretModel:TurretAIModel, 		    gameModel:Object, 		    stage:Object		  ):void 		{			this._turretModel = turretModel;			this._gameModel = gameModel;			this._stage = stage;		}		  	internal function attack():void  	{  	    	  var fireTime:Number;  	    	  if(!_turretArmed)  	  {  	    if(_turretModel.randomFire)  	      {  	        //Figure out the random fire time, which will be  	        //a number between 200 and 1000 milliseconds.  	        //(The _turretModel.fireFrequency propery has a  	        //default value of 1000 milliseconds)  	        fireTime   	          = Math.round  	            (  	              Math.random() * _turretModel.fireFrequency  	            )   	            + 200;    	      }	        _timer = new Timer(fireTime);	        _timer.addEventListener	          (TimerEvent.TIMER, timerEventHandler);	        _timer.start();        }      _turretArmed = true;  	}  	private function timerEventHandler(event:TimerEvent):void  	{  	  //When the timer finishes, set the turret Model's  	  //fireBullets property to true.  	  //This gives the GameController permission   	  //to add bullets to the stage. The turret itself  	  //doesn't fire any bullets.  	  //The GameController does the actual job of adding,  	  //managing and removing the bullets in the game.  	  _turretModel.fireBullet = true;  	  _turretArmed = false;  	  _timer.removeEventListener(TimerEvent.TIMER, timerEventHandler);	  }	}}